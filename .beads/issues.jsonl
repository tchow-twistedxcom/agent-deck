{"id":"claude-deck-3xs","title":"Fix rate limit sliding window logic in health monitor","description":"pool_simple.go ~line 300: Rate limit checks lastRestart timing but doesn't use a proper sliding window. Can allow bursts of restarts if they happen to fall on opposite sides of the time boundary. Also consider lowering maxTotalRestartFailures from 10 to 5.","status":"open","priority":2,"issue_type":"bug","owner":"ashesh.goplani96@gmail.com","created_at":"2026-02-06T01:35:22.213814+05:00","created_by":"Ashesh Goplani","updated_at":"2026-02-06T01:35:38.678617+05:00"}
{"id":"claude-deck-85g","title":"Add manual reset for permanently failed MCPs","description":"When an MCP hits maxTotalRestartFailures, it's permanently marked as failed with no way to reset without restarting agent-deck. Add a TUI action or CLI command to manually reset a failed MCP's failure counter and trigger a fresh start attempt.","status":"open","priority":3,"issue_type":"task","owner":"ashesh.goplani96@gmail.com","created_at":"2026-02-06T01:35:23.186482+05:00","created_by":"Ashesh Goplani","updated_at":"2026-02-06T01:35:41.340496+05:00"}
{"id":"claude-deck-8wj","title":"Agent-Deck Development","description":"Ongoing development and improvements to agent-deck terminal session manager for AI coding agents","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-20T20:15:29.004671+05:00","created_by":"ashesh","updated_at":"2026-01-20T20:15:29.004671+05:00"}
{"id":"claude-deck-8wj.1","title":"MCP Pool improvements","description":"Improvements to internal/mcppool/pool_simple.go - MCP connection pooling","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-20T20:15:38.207223+05:00","created_by":"ashesh","updated_at":"2026-01-20T20:15:38.207223+05:00","dependencies":[{"issue_id":"claude-deck-8wj.1","depends_on_id":"claude-deck-8wj","type":"parent-child","created_at":"2026-01-20T20:15:38.207759+05:00","created_by":"ashesh"}]}
{"id":"claude-deck-8wj.2","title":"Session pool manager updates","description":"Updates to internal/session/pool_manager.go - session management improvements","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-20T20:15:39.667416+05:00","created_by":"ashesh","updated_at":"2026-01-20T20:15:39.667416+05:00","dependencies":[{"issue_id":"claude-deck-8wj.2","depends_on_id":"claude-deck-8wj","type":"parent-child","created_at":"2026-01-20T20:15:39.668973+05:00","created_by":"ashesh"}]}
{"id":"claude-deck-8wj.3","title":"UI improvements","description":"Updates to internal/ui/home.go and confirm_dialog.go - TUI improvements","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-20T20:15:40.834784+05:00","created_by":"ashesh","updated_at":"2026-01-20T20:15:40.834784+05:00","dependencies":[{"issue_id":"claude-deck-8wj.3","depends_on_id":"claude-deck-8wj","type":"parent-child","created_at":"2026-01-20T20:15:40.836568+05:00","created_by":"ashesh"}]}
{"id":"claude-deck-9dm","title":"Add Setpgid to kill grandchild MCP processes (npx/uvx)","description":"socket_proxy.go line 158: exec.Cmd doesn't set SysProcAttr.Setpgid=true. When npx/uvx spawns grandchild processes, killing the parent doesn't kill the tree. Fix: set Setpgid=true on Start(), then use syscall.Kill(-pid, SIGTERM) in Stop(). This is the root cause of the Playwright CPU leak incident. Claude Code has open P0 bugs for the same issue (#1935, #15945).","status":"closed","priority":1,"issue_type":"bug","owner":"ashesh.goplani96@gmail.com","created_at":"2026-02-06T01:35:17.658392+05:00","created_by":"Ashesh Goplani","updated_at":"2026-02-06T01:47:40.525734+05:00","closed_at":"2026-02-06T01:47:40.525734+05:00","close_reason":"Fixed in socket_proxy.go: added Setpgid=true and Kill(-pid) for process group cleanup"}
{"id":"claude-deck-ccb","title":"Clean up stale external socket files on startup","description":"When agent-deck discovers external sockets (isSocketAlive in socket_proxy.go), it reuses them. But if the owning instance crashes, these sockets become stale and are never cleaned up. On startup, check all /tmp/agentdeck-mcp-*.sock files and remove ones where isSocketAlive returns false.","status":"open","priority":4,"issue_type":"task","owner":"ashesh.goplani96@gmail.com","created_at":"2026-02-06T01:35:24.068142+05:00","created_by":"Ashesh Goplani","updated_at":"2026-02-06T01:35:42.79448+05:00"}
{"id":"claude-deck-cib","title":"Hybrid status detection: WebSocket NDJSON protocol for Claude Code sessions","description":"Investigate using Claude Code's hidden --sdk-url WebSocket flag for perfect status detection in Claude sessions.\n\n## Context\nThe Vibe Company's 'companion' repo (github.com/The-Vibe-Company/companion) reverse-engineered Claude Code's NDJSON WebSocket protocol. This gives protocol-driven status detection (running/idle/waiting/error) with zero polling and zero regex.\n\n## Key Constraint\n--sdk-url disables Claude's TUI entirely (headless mode). Cannot have both WebSocket AND interactive terminal from the same Claude process. Requires a different architecture.\n\n## Recommended Approach: SDK Mode as Optional Session Type\n- Add config option: [claude] sdk_mode = true (default: false)\n- When enabled, Claude runs headless via --sdk-url pointing to embedded Go WebSocket server\n- Agent-deck renders conversation into tmux pane (custom renderer)\n- Status detection becomes perfect (protocol-driven, no regex)\n- Also gets: cost tracking, token counts, context %, tool call visibility\n\n## Injection Points\n- buildClaudeExtraFlags() at instance.go:420\n- buildClaudeResumeCommand() at instance.go:2586\n- ClaudeOptions struct in tooloptions.go\n- ClaudeSettings struct in userconfig.go\n\n## What to Build\n1. Go WebSocket server (~200-300 lines, embedded in agent-deck)\n2. NDJSON parser (5 message types: system/init, assistant, result, control_request, keep_alive)\n3. Status state machine (maps to existing GREEN/YELLOW/GRAY/RED)\n4. tmux pane renderer (format SDK messages for terminal display)\n5. Input capture (route user keystrokes to WebSocket user messages)\n6. Permission handler (auto-approve in dangerous mode)\n\n## Risk\n--sdk-url is hidden/undocumented. Anthropic could change or remove it. Feature must be opt-in with fallback to normal tmux mode.\n\n## Reference\nProtocol spec: WEBSOCKET_PROTOCOL_REVERSED.md in companion repo\nCompanion repo: github.com/The-Vibe-Company/companion (MIT license, 775 stars)","status":"open","priority":2,"issue_type":"feature","owner":"ashesh.goplani96@gmail.com","created_at":"2026-02-10T12:29:07.317542+05:00","created_by":"Ashesh Goplani","updated_at":"2026-02-10T12:37:57.192171+05:00"}
{"id":"claude-deck-hpw","title":"Add MCP-level ping health check for stuck servers","description":"socket_proxy.go HealthCheck() (line 451) only checks Signal(0) + socket file exists. Doesn't catch stuck/frozen MCP servers. Fix: send a JSON-RPC ping request through the socket and verify response within 5s timeout. MCP spec explicitly supports ping method. Claude Code had a 16-hour hang (issue #15945) from this exact gap.","status":"open","priority":2,"issue_type":"task","owner":"ashesh.goplani96@gmail.com","created_at":"2026-02-06T01:35:21.011767+05:00","created_by":"Ashesh Goplani","updated_at":"2026-02-06T01:35:36.906364+05:00"}
{"id":"claude-deck-nv1","title":"Use sync.Pool for scanner buffers to reduce memory ~70%","description":"socket_proxy.go lines 273, 295: Each client connection allocates a 10MB scanner buffer (64KB initial + 10MB max). With 100 max clients per proxy, worst case is 1GB per MCP. Fix: use sync.Pool to share buffers across connections, and consider lazy allocation (start at 64KB, grow only if needed). Most MCP messages are \u003c100KB.","status":"open","priority":2,"issue_type":"task","owner":"ashesh.goplani96@gmail.com","created_at":"2026-02-06T01:35:18.667348+05:00","created_by":"Ashesh Goplani","updated_at":"2026-02-06T01:35:34.297039+05:00"}
